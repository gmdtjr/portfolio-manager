import os
import pandas as pd
from dotenv import load_dotenv
from investment_notes_manager import InvestmentNotesManager
from deep_research_question_generator import DeepResearchQuestionGenerator

def check_portfolio_notes_status():
    """ν¬νΈν΄λ¦¬μ¤ μΆ…λ©λ“¤κ³Ό ν¬μ λ…ΈνΈ ν„ν™© ν™•μΈ"""
    print("π“ ν¬νΈν΄λ¦¬μ¤ μΆ…λ©κ³Ό ν¬μ λ…ΈνΈ ν„ν™© ν™•μΈ")
    print("=" * 60)
    
    # ν™κ²½λ³€μ λ΅λ“
    load_dotenv()
    
    spreadsheet_id = os.getenv('GOOGLE_SPREADSHEET_ID')
    
    if not spreadsheet_id:
        print("β GOOGLE_SPREADSHEET_IDκ°€ μ„¤μ •λμ§€ μ•μ•μµλ‹λ‹¤.")
        return
    
    try:
        # ν¬νΈν΄λ¦¬μ¤ λ°μ΄ν„° μ½κΈ° (DeepResearchQuestionGenerator μ‚¬μ©)
        print("π“‹ ν¬νΈν΄λ¦¬μ¤ λ°μ΄ν„°λ¥Ό μ½κ³  μμµλ‹λ‹¤...")
        generator = DeepResearchQuestionGenerator(spreadsheet_id)
        portfolio_df = generator.read_portfolio_data()
        print(f"β… ν¬νΈν΄λ¦¬μ¤ λ°μ΄ν„° μ½κΈ° μ™„λ£: {len(portfolio_df)}κ° μΆ…λ©")
        
        # ν¬μ λ…ΈνΈ λ°μ΄ν„° μ½κΈ°
        print("\nπ“ ν¬μ λ…ΈνΈ λ°μ΄ν„°λ¥Ό μ½κ³  μμµλ‹λ‹¤...")
        notes_manager = InvestmentNotesManager(spreadsheet_id)
        notes_df = notes_manager.read_investment_notes()
        print(f"β… ν¬μ λ…ΈνΈ λ°μ΄ν„° μ½κΈ° μ™„λ£: {len(notes_df)}κ° μΆ…λ©")
        
        # ν¬νΈν΄λ¦¬μ¤ μΆ…λ© λ©λ΅
        print("\nπ“‹ ν¬νΈν΄λ¦¬μ¤ μΆ…λ© λ©λ΅:")
        for _, row in portfolio_df.iterrows():
            print(f"- {row['μΆ…λ©λ…']} ({row['μΆ…λ©μ½”λ“']}) - {row['ν‰κ°€κΈμ•΅(μ›)']:,.0f}μ›")
        
        # ν¬μ λ…ΈνΈκ°€ μλ” μΆ…λ©λ“¤
        portfolio_notes = notes_manager.get_notes_by_portfolio(portfolio_df)
        missing_notes = notes_manager.get_missing_notes(portfolio_df)
        
        print(f"\nπ“ ν¬μ λ…ΈνΈ ν„ν™©:")
        print(f"- ν¬νΈν΄λ¦¬μ¤ μΆ…λ© μ: {len(portfolio_df)}κ°")
        print(f"- ν¬μ λ…ΈνΈ μλ” μΆ…λ©: {len(portfolio_notes)}κ°")
        print(f"- ν¬μ λ…ΈνΈ μ—†λ” μΆ…λ©: {len(missing_notes)}κ°")
        
        if not portfolio_notes.empty:
            print(f"\nβ… ν¬μ λ…ΈνΈκ°€ μλ” μΆ…λ©λ“¤:")
            for _, note in portfolio_notes.iterrows():
                print(f"- {note['μΆ…λ©λ…']} ({note['μΆ…λ©μ½”λ“']}) - {note['λ§μ§€λ§‰_μμ •μΌ']}")
        
        if missing_notes:
            print(f"\nβ οΈ ν¬μ λ…ΈνΈκ°€ ν•„μ”ν• μΆ…λ©λ“¤:")
            missing_stocks = portfolio_df[portfolio_df['μΆ…λ©μ½”λ“'].astype(str).isin(missing_notes)]
            for _, stock in missing_stocks.iterrows():
                print(f"- {stock['μΆ…λ©λ…']} ({stock['μΆ…λ©μ½”λ“']})")
        
        # ν¬μ λ…ΈνΈ μ¶”κ°€ μ—¬λ¶€ ν™•μΈ
        if missing_notes:
            print(f"\nπ¤” ν¬μ λ…ΈνΈλ¥Ό μ¶”κ°€ν•μ‹κ² μµλ‹κΉ?")
            user_input = input("μƒν” ν¬μ λ…ΈνΈλ¥Ό μƒμ„±ν•μ‹κ² μµλ‹κΉ? (y/n): ")
            
            if user_input.lower() == 'y':
                create_sample_notes(notes_manager, missing_stocks)
        
        print("\nβ… ν„ν™© ν™•μΈμ΄ μ™„λ£λμ—μµλ‹λ‹¤!")
        
    except Exception as e:
        print(f"β ν„ν™© ν™•μΈ μ‹¤ν¨: {e}")
        import traceback
        print(f"μƒμ„Έ μ¤λ¥: {traceback.format_exc()}")

def create_sample_notes(notes_manager, missing_stocks):
    """λ„λ½λ μΆ…λ©λ“¤μ— λ€ν• μƒν” ν¬μ λ…ΈνΈ μƒμ„±"""
    print("\nπ“ μƒν” ν¬μ λ…ΈνΈλ¥Ό μƒμ„±ν•©λ‹λ‹¤...")
    
    # ν„μ¬ ν¬νΈν΄λ¦¬μ¤μ— μλ” μΆ…λ©λ“¤μ— λ€ν• μƒν” ν¬μ λ…ΈνΈ ν…ν”λ¦Ώ
    sample_notes = {
        '005490': {  # POSCOν™€λ”©μ¤
            'μΆ…λ©μ½”λ“': '005490',
            'μΆ…λ©λ…': 'POSCOν™€λ”©μ¤',
            'ν¬μ μ•„μ΄λ””μ–΄ (Thesis)': 'κΈ€λ΅λ² μ² κ°• μ‚°μ—…μ λ¦¬λ”λ΅μ„, μΉν™κ²½ μ² κ°• κΈ°μ κ³Ό ν•΄μ™Έ μ‚¬μ—… ν™•μ¥μ„ ν†µν• μ„±μ¥.',
            'ν¬μ ν™•μ‹ λ„ (Conviction)': 'μ¤‘ (Medium)',
            'μ„Ήν„°/μ‚°μ—… (Sector/Industry)': 'μ†μ¬ > μ² κ°• > μΉν™κ²½μ² κ°•',
            'ν¬μ μ ν• (Asset Type)': 'κ²½κΈ°μν™μ£Ό (Cyclical)',
            'ν•µμ‹¬ μ΄‰λ§¤ (Catalysts)': '1. μΉν™κ²½ μ² κ°• κΈ°μ  κ°λ° μ„±κ³Ό\n2. ν•΄μ™Έ μ‚¬μ—… ν™•μ¥ λ° μμµμ„± κ°μ„ \n3. μ›μμ¬ κ°€κ²© μ•μ •ν™”',
            'ν•µμ‹¬ λ¦¬μ¤ν¬ (Risks)': '1. κΈ€λ΅λ² κ²½κΈ° μΉ¨μ²΄λ΅ μΈν• μ² κ°• μμ” κ°μ†\n2. μ›μμ¬ κ°€κ²© λ³€λ™μ„±\n3. μ¤‘κµ­ μ² κ°• μ‚°μ—… κ³Όμ‰ κ³µκΈ‰',
            'ν•µμ‹¬ λ¨λ‹ν„°λ§ μ§€ν‘ (KPIs)': '1. λ¶„κΈ°λ³„ μμ—…μ΄μµλ¥ \n2. μΉν™κ²½ μ² κ°• λ§¤μ¶ λΉ„μ¤‘\n3. ν•΄μ™Έ μ‚¬μ—… λ§¤μ¶ λΉ„μ¤‘',
            'ν¬μ κΈ°κ°„ (Horizon)': 'μ¤‘μ¥κΈ° (2-3λ…„)',
            'λ©ν‘ μ£Όκ°€ (Target)': '1μ°¨: 500,000μ›\n2μ°¨: 600,000μ›',
            'λ§¤λ„ μ΅°κ±΄ (Exit Plan)': 'μμµ μ‹¤ν„: 1μ°¨ λ©ν‘ μ£Όκ°€ λ„λ‹¬ μ‹ 30% λ¶„ν•  λ§¤λ„\nμ†μ : μ² κ°• μ‚°μ—… κµ¬μ΅°μ  μ•…ν™” μ‹ μ¦‰μ‹ λ§¤λ„'
        },
        '006400': {  # μ‚Όμ„±SDI
            'μΆ…λ©μ½”λ“': '006400',
            'μΆ…λ©λ…': 'μ‚Όμ„±SDI',
            'ν¬μ μ•„μ΄λ””μ–΄ (Thesis)': '2μ°¨μ „μ§€ μ‚°μ—…μ κΈ€λ΅λ² λ¦¬λ”λ΅μ„, μ „κΈ°μ°¨ λ°°ν„°λ¦¬ μ‹μ¥ ν™•λ€μ™€ μ—λ„μ§€ μ €μ¥μ¥μΉ(ESS) μ‚¬μ—… μ„±μ¥.',
            'ν¬μ ν™•μ‹ λ„ (Conviction)': 'μƒ (High)',
            'μ„Ήν„°/μ‚°μ—… (Sector/Industry)': 'IT > 2μ°¨μ „μ§€ > μ „κΈ°μ°¨λ°°ν„°λ¦¬',
            'ν¬μ μ ν• (Asset Type)': 'μ„±μ¥μ£Ό (Growth)',
            'ν•µμ‹¬ μ΄‰λ§¤ (Catalysts)': '1. μ „κΈ°μ°¨ λ°°ν„°λ¦¬ κ³µκΈ‰ κ³„μ•½ ν™•λ€\n2. ESS μ‹μ¥ μ§„μ¶ μ„±κ³Ό\n3. μ°¨μ„Έλ€ λ°°ν„°λ¦¬ κΈ°μ  κ°λ°',
            'ν•µμ‹¬ λ¦¬μ¤ν¬ (Risks)': '1. μ¤‘κµ­ λ°°ν„°λ¦¬ μ—…μ²΄λ“¤μ κ°€κ²© κ²½μ\n2. μ›μμ¬ κ°€κ²© μƒμΉ\n3. μ „κΈ°μ°¨ λ³΄μ΅°κΈ μ •μ±… λ³€ν™”',
            'ν•µμ‹¬ λ¨λ‹ν„°λ§ μ§€ν‘ (KPIs)': '1. μ „κΈ°μ°¨ λ°°ν„°λ¦¬ λ§¤μ¶ μ„±μ¥λ¥ \n2. ESS μ‚¬μ—… λ§¤μ¶ λΉ„μ¤‘\n3. μμ—…μ΄μµλ¥ ',
            'ν¬μ κΈ°κ°„ (Horizon)': 'μ¥κΈ° (3-5λ…„)',
            'λ©ν‘ μ£Όκ°€ (Target)': '1μ°¨: 600,000μ›\n2μ°¨: 800,000μ›',
            'λ§¤λ„ μ΅°κ±΄ (Exit Plan)': 'μμµ μ‹¤ν„: 1μ°¨ λ©ν‘ μ£Όκ°€ λ„λ‹¬ μ‹ 30% λ¶„ν•  λ§¤λ„\nμ†μ : λ°°ν„°λ¦¬ κΈ°μ  κ²½μλ ¥ μƒμ‹¤ μ‹ μ¦‰μ‹ λ§¤λ„'
        },
        '194480': {  # λ°λΈμ‹μ¤ν„°μ¦
            'μΆ…λ©μ½”λ“': '194480',
            'μΆ…λ©λ…': 'λ°λΈμ‹μ¤ν„°μ¦',
            'ν¬μ μ•„μ΄λ””μ–΄ (Thesis)': 'λ¨λ°”μΌ κ²μ„ κ°λ°μ‚¬λ΅μ„, κΈ€λ΅λ² κ²μ„ μ‹μ¥ μ§„μ¶κ³Ό μ‹ μ‘ μ„±κ³µμ„ ν†µν• μ„±μ¥.',
            'ν¬μ ν™•μ‹ λ„ (Conviction)': 'μ¤‘ (Medium)',
            'μ„Ήν„°/μ‚°μ—… (Sector/Industry)': 'IT > κ²μ„ > λ¨λ°”μΌκ²μ„',
            'ν¬μ μ ν• (Asset Type)': 'μ„±μ¥μ£Ό (Growth)',
            'ν•µμ‹¬ μ΄‰λ§¤ (Catalysts)': '1. μ‹ μ‘ κ²μ„ μ„±κ³µ\n2. κΈ€λ΅λ² μ‹μ¥ μ§„μ¶ ν™•λ€\n3. κ²μ„ IP λΌμ΄μ„Όμ‹± μμµ μ¦κ°€',
            'ν•µμ‹¬ λ¦¬μ¤ν¬ (Risks)': '1. κ²μ„ μ‹μ¥ κ²½μ μ‹¬ν™”\n2. μ‹ μ‘ μ‹¤ν¨ λ¦¬μ¤ν¬\n3. λ¨λ°”μΌ κ²μ„ μ‹μ¥ μ„±μ¥ λ‘”ν™”',
            'ν•µμ‹¬ λ¨λ‹ν„°λ§ μ§€ν‘ (KPIs)': '1. μ‹ μ‘ κ²μ„ λ§¤μ¶ κΈ°μ—¬λ„\n2. κΈ€λ΅λ² λ§¤μ¶ λΉ„μ¤‘\n3. μμ—…μ΄μµλ¥ ',
            'ν¬μ κΈ°κ°„ (Horizon)': 'μ¤‘κΈ° (1-2λ…„)',
            'λ©ν‘ μ£Όκ°€ (Target)': '1μ°¨: 200,000μ›\n2μ°¨: 250,000μ›',
            'λ§¤λ„ μ΅°κ±΄ (Exit Plan)': 'μμµ μ‹¤ν„: 1μ°¨ λ©ν‘ μ£Όκ°€ λ„λ‹¬ μ‹ 50% λ§¤λ„\nμ†μ : μ‹ μ‘ μ‹¤ν¨ μ‹ μ¦‰μ‹ λ§¤λ„'
        },
        'FSLR': {  # νΌμ¤νΈ μ†”λΌ
            'μΆ…λ©μ½”λ“': 'FSLR',
            'μΆ…λ©λ…': 'νΌμ¤νΈ μ†”λΌ',
            'ν¬μ μ•„μ΄λ””μ–΄ (Thesis)': 'νƒμ–‘κ΄‘ ν¨λ„ μ μ΅°μ—…μ²΄λ΅μ„, μ¬μƒμ—λ„μ§€ μ‹μ¥ ν™•λ€μ™€ λ―Έκµ­ IRA μ •μ±… ννƒ.',
            'ν¬μ ν™•μ‹ λ„ (Conviction)': 'μƒ (High)',
            'μ„Ήν„°/μ‚°μ—… (Sector/Industry)': 'μ—λ„μ§€ > μ¬μƒμ—λ„μ§€ > νƒμ–‘κ΄‘',
            'ν¬μ μ ν• (Asset Type)': 'μ„±μ¥μ£Ό (Growth)',
            'ν•µμ‹¬ μ΄‰λ§¤ (Catalysts)': '1. λ―Έκµ­ IRA μ •μ±… ννƒ\n2. νƒμ–‘κ΄‘ μ„¤μΉλ‰ μ¦κ°€\n3. μ μ΅° λ¥λ ¥ ν™•λ€',
            'ν•µμ‹¬ λ¦¬μ¤ν¬ (Risks)': '1. μ¤‘κµ­ νƒμ–‘κ΄‘ μ—…μ²΄λ“¤κ³Όμ κ°€κ²© κ²½μ\n2. μ •λ¶€ λ³΄μ΅°κΈ μ •μ±… λ³€ν™”\n3. μ›μμ¬ κ°€κ²© μƒμΉ',
            'ν•µμ‹¬ λ¨λ‹ν„°λ§ μ§€ν‘ (KPIs)': '1. λ¶„κΈ°λ³„ λ§¤μ¶ μ„±μ¥λ¥ \n2. μ μ΅° λ¥λ ¥ ν™μ©λ¥ \n3. μμ—…μ΄μµλ¥ ',
            'ν¬μ κΈ°κ°„ (Horizon)': 'μ¤‘μ¥κΈ° (2-3λ…„)',
            'λ©ν‘ μ£Όκ°€ (Target)': '1μ°¨: $300\n2μ°¨: $400',
            'λ§¤λ„ μ΅°κ±΄ (Exit Plan)': 'μμµ μ‹¤ν„: 1μ°¨ λ©ν‘ μ£Όκ°€ λ„λ‹¬ μ‹ 30% λ¶„ν•  λ§¤λ„\nμ†μ : IRA μ •μ±… λ³€ν™” μ‹ μ¦‰μ‹ λ§¤λ„'
        },
        'GOOGL': {  # μ•νλ²³ A
            'μΆ…λ©μ½”λ“': 'GOOGL',
            'μΆ…λ©λ…': 'μ•νλ²³ A',
            'ν¬μ μ•„μ΄λ””μ–΄ (Thesis)': 'AI κΈ°μ  νμ‹ μ„ ν†µν• κ΄‘κ³  μ‚¬μ—… κ°•ν™”μ™€ ν΄λΌμ°λ“ μ‚¬μ—… μ„±μ¥.',
            'ν¬μ ν™•μ‹ λ„ (Conviction)': 'μƒ (High)',
            'μ„Ήν„°/μ‚°μ—… (Sector/Industry)': 'IT > μΈν„°λ„· > AIν”λ«νΌ',
            'ν¬μ μ ν• (Asset Type)': 'μ„±μ¥μ£Ό (Growth)',
            'ν•µμ‹¬ μ΄‰λ§¤ (Catalysts)': '1. AI κΈ°μ  νμ‹  μ„±κ³Ό\n2. ν΄λΌμ°λ“ μ‚¬μ—… μ„±μ¥\n3. κ΄‘κ³  μ‹μ¥ νλ³µ',
            'ν•µμ‹¬ λ¦¬μ¤ν¬ (Risks)': '1. κ·μ  ν™κ²½ λ³€ν™”\n2. AI κ²½μ μ‹¬ν™”\n3. κ΄‘κ³  μ‹μ¥ μΉ¨μ²΄',
            'ν•µμ‹¬ λ¨λ‹ν„°λ§ μ§€ν‘ (KPIs)': '1. ν΄λΌμ°λ“ μ‚¬μ—… λ§¤μ¶ μ„±μ¥λ¥ \n2. AI μ„λΉ„μ¤ μ‚¬μ©μ μ\n3. κ΄‘κ³  λ§¤μ¶ μ„±μ¥λ¥ ',
            'ν¬μ κΈ°κ°„ (Horizon)': 'μ¥κΈ° (3-5λ…„)',
            'λ©ν‘ μ£Όκ°€ (Target)': '1μ°¨: $200\n2μ°¨: $250',
            'λ§¤λ„ μ΅°κ±΄ (Exit Plan)': 'μμµ μ‹¤ν„: 1μ°¨ λ©ν‘ μ£Όκ°€ λ„λ‹¬ μ‹ 30% λ¶„ν•  λ§¤λ„\nμ†μ : AI κ²½μλ ¥ μƒμ‹¤ μ‹ μ¦‰μ‹ λ§¤λ„'
        },
        'NVDA': {  # μ—”λΉ„λ””μ•„
            'μΆ…λ©μ½”λ“': 'NVDA',
            'μΆ…λ©λ…': 'μ—”λΉ„λ””μ•„',
            'ν¬μ μ•„μ΄λ””μ–΄ (Thesis)': 'AI λ°λ„μ²΄ μ‹μ¥μ μ λ€μ  λ¦¬λ”λ΅μ„, AI μμ” μ¦κ°€μ™€ λ°μ΄ν„°μ„Όν„° μ‚¬μ—… μ„±μ¥.',
            'ν¬μ ν™•μ‹ λ„ (Conviction)': 'μƒ (High)',
            'μ„Ήν„°/μ‚°μ—… (Sector/Industry)': 'IT > λ°λ„μ²΄ > AIλ°λ„μ²΄',
            'ν¬μ μ ν• (Asset Type)': 'μ„±μ¥μ£Ό (Growth)',
            'ν•µμ‹¬ μ΄‰λ§¤ (Catalysts)': '1. AI μμ” μ¦κ°€\n2. λ°μ΄ν„°μ„Όν„° μ‚¬μ—… μ„±μ¥\n3. μμ¨μ£Όν–‰ κΈ°μ  λ°μ „',
            'ν•µμ‹¬ λ¦¬μ¤ν¬ (Risks)': '1. κ²½μμ‚¬λ“¤μ AI λ°λ„μ²΄ κ°λ°\n2. λ°λ„μ²΄ μμ” κ°μ†\n3. κ·μ  ν™κ²½ λ³€ν™”',
            'ν•µμ‹¬ λ¨λ‹ν„°λ§ μ§€ν‘ (KPIs)': '1. λ°μ΄ν„°μ„Όν„° λ§¤μ¶ μ„±μ¥λ¥ \n2. AI λ°λ„μ²΄ λ§¤μ¶ λΉ„μ¤‘\n3. μμ—…μ΄μµλ¥ ',
            'ν¬μ κΈ°κ°„ (Horizon)': 'μ¥κΈ° (3-5λ…„)',
            'λ©ν‘ μ£Όκ°€ (Target)': '1μ°¨: $1,000\n2μ°¨: $1,200',
            'λ§¤λ„ μ΅°κ±΄ (Exit Plan)': 'μμµ μ‹¤ν„: 1μ°¨ λ©ν‘ μ£Όκ°€ λ„λ‹¬ μ‹ 30% λ¶„ν•  λ§¤λ„\nμ†μ : AI λ°λ„μ²΄ κ²½μλ ¥ μƒμ‹¤ μ‹ μ¦‰μ‹ λ§¤λ„'
        }
    }
    
    created_count = 0
    for _, stock in missing_stocks.iterrows():
        stock_code = str(stock['μΆ…λ©μ½”λ“'])
        stock_name = stock['μΆ…λ©λ…']
        
        # μƒν” λ…ΈνΈκ°€ μμΌλ©΄ μ‚¬μ©, μ—†μΌλ©΄ κΈ°λ³Έ ν…ν”λ¦Ώ μƒμ„±
        if stock_code in sample_notes:
            note_data = sample_notes[stock_code]
        else:
            # κΈ°λ³Έ ν…ν”λ¦Ώ μƒμ„±
            note_data = {
                'μΆ…λ©μ½”λ“': stock_code,
                'μΆ…λ©λ…': stock_name,
                'ν¬μ μ•„μ΄λ””μ–΄ (Thesis)': f'{stock_name}μ— λ€ν• ν¬μ μ•„μ΄λ””μ–΄λ¥Ό μ‘μ„±ν•΄μ£Όμ„Έμ”.',
                'ν¬μ ν™•μ‹ λ„ (Conviction)': 'μ¤‘ (Medium)',
                'μ„Ήν„°/μ‚°μ—… (Sector/Industry)': 'μ„Ήν„° > μ‚°μ—… > μ„Έλ¶€μ‚°μ—…',
                'ν¬μ μ ν• (Asset Type)': 'μ„±μ¥μ£Ό (Growth)',
                'ν•µμ‹¬ μ΄‰λ§¤ (Catalysts)': '1. μ²« λ²μ§Έ μ΄‰λ§¤\n2. λ‘ λ²μ§Έ μ΄‰λ§¤\n3. μ„Έ λ²μ§Έ μ΄‰λ§¤',
                'ν•µμ‹¬ λ¦¬μ¤ν¬ (Risks)': '1. μ²« λ²μ§Έ λ¦¬μ¤ν¬\n2. λ‘ λ²μ§Έ λ¦¬μ¤ν¬\n3. μ„Έ λ²μ§Έ λ¦¬μ¤ν¬',
                'ν•µμ‹¬ λ¨λ‹ν„°λ§ μ§€ν‘ (KPIs)': '1. μ²« λ²μ§Έ μ§€ν‘\n2. λ‘ λ²μ§Έ μ§€ν‘\n3. μ„Έ λ²μ§Έ μ§€ν‘',
                'ν¬μ κΈ°κ°„ (Horizon)': 'μ¤‘κΈ° (1-2λ…„)',
                'λ©ν‘ μ£Όκ°€ (Target)': '1μ°¨: λ©ν‘ μ£Όκ°€ μ„¤μ •\n2μ°¨: λ‘ λ²μ§Έ λ©ν‘ μ£Όκ°€',
                'λ§¤λ„ μ΅°κ±΄ (Exit Plan)': 'μμµ μ‹¤ν„: λ©ν‘ μ£Όκ°€ λ„λ‹¬ μ‹ λ¶„ν•  λ§¤λ„\nμ†μ : ν¬μ μ•„μ΄λ””μ–΄ ν›Όμ† μ‹ μ¦‰μ‹ λ§¤λ„'
            }
        
        # ν¬μ λ…ΈνΈ μ¶”κ°€
        if notes_manager.add_investment_note(note_data):
            created_count += 1
            print(f"β… {stock_name} ({stock_code}) ν¬μ λ…ΈνΈ μƒμ„± μ™„λ£")
        else:
            print(f"β οΈ {stock_name} ({stock_code}) ν¬μ λ…ΈνΈ μƒμ„± μ‹¤ν¨")
    
    print(f"\nπ“ μ΄ {created_count}κ°μ ν¬μ λ…ΈνΈκ°€ μƒμ„±λμ—μµλ‹λ‹¤.")

def main():
    """λ©”μΈ ν•¨μ"""
    check_portfolio_notes_status()

if __name__ == "__main__":
    main()
